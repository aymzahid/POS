<ion-header>
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button expand="block" (click)="close()" color="dark">
        <ion-icon slot="start" name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="ion-text-center" color="light"
      >Add New Product
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <form #userForm="ngForm" (ngSubmit)="onSubmit(userForm)">
    <ion-card>
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col size="3" offset="2">
              <ion-label>Product Name</ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input
                clear-input
                class="product_name"
                mode="ios"
                type="text"
                name="p_name"
                ngModel
                required
                #p_name="ngModel"
                placeholder="Product Name"
                [ngStyle]="{'border-color':  p_name.invalid && (p_name.dirty || p_name.touched)?'var(--ion-color-danger) ': p_name.valid?'var(--ion-color-success)' :'' }"
              ></ion-input>
              <!-- <div
                *ngIf="p_name.invalid && (p_name.dirty || p_name.touched)"
                class="alert"
              >
                <div *ngIf="p_name.errors?.['required']">Name is required.</div>
              </div> -->
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="3" offset="2">
              <ion-label>Category</ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-select
                (ionChange)="selectCategory($event)"
                class="category"
                mode="ios"
                [interfaceOptions]="categoryOptions"
                name="cat_id"
                placeholder="Select Product Category"
                ngModel
                #cat_id="ngModel"
                required
                [ngStyle]="{'border-color':  cat_id.invalid && (cat_id.dirty || cat_id.touched)?'var(--ion-color-danger) ': cat_id.valid?'var(--ion-color-success)' :'' }"
              >
                <ion-select-option
                  [value]="item.id"
                  *ngFor="let item of data?.product_categories"
                >
                  {{item.name}}</ion-select-option
                >
              </ion-select>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="3" offset="2">
              <ion-label>Sub Category</ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-select
                (ionChange)="selectSubCategory($event)"
                class="category"
                mode="ios"
                [interfaceOptions]="categoryOptions"
                name="sub_cat_id"
                placeholder="Select Sub Category"
                ngModel
                #sub_cat_id="ngModel"
                required
                [ngStyle]="{'border-color':  sub_cat_id.invalid && (sub_cat_id.dirty || sub_cat_id.touched)?'var(--ion-color-danger) ': sub_cat_id.valid?'var(--ion-color-success)' :'','z-index':cat_id.pristine  || cat_id.untouched ?'-1':''}"
              >
                <ion-select-option
                  [value]="item.id"
                  *ngFor="let item of sub_categories_list"
                >
                  {{item.name}}</ion-select-option
                >
              </ion-select>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="3" offset="2">
              <ion-label>Manufacturer</ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input
                clear-input
                class="manufacturer"
                mode="ios"
                type="text"
                name="manufacturer"
                placeholder="Manufacturer"
                ngModel
                #manufacturer="ngModel"
                required
                [ngStyle]="{'border-color':  manufacturer.invalid && (manufacturer.dirty || manufacturer.touched)?'var(--ion-color-danger) ': manufacturer.valid?'var(--ion-color-success)' :'' }"
              ></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="3" offset="2">
              <ion-label>Unit of Measurement</ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input
                clear-input
                mode="ios"
                type="text"
                name="unit_of_measurement"
                placeholder=" Unit of Measurement"
                ngModel
                #unit_of_measurement="ngModel"
                required
                [ngStyle]="{'border-color':  unit_of_measurement.invalid && (unit_of_measurement.dirty || unit_of_measurement.touched)?'var(--ion-color-danger) ': unit_of_measurement.valid?'var(--ion-color-success)' :'' }"
              ></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="3" offset="2">
              <ion-label>Purchase Price/Unit</ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input
                clear-input
                class="p_price edit_input"
                mode="ios"
                type="number"
                name="p_price"
                placeholder="Enter Purchase Price/Unit"
                ngModel
                #p_price="ngModel"
                required
                min="0"
                [ngStyle]="{'border-color':  p_price.invalid && (p_price.dirty || p_price.touched)?'var(--ion-color-danger) ': p_price.valid?'var(--ion-color-success)' :'' }"
              ></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="3" offset="2">
              <ion-label>Sale Price/Unit</ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input
                clear-input
                class="s_price edit_input"
                mode="ios"
                type="number"
                name="s_price"
                placeholder="Enter Sale Price/Unit"
                ngModel
                #s_price="ngModel"
                required
                min="0"
                [ngStyle]="{'border-color':  s_price.invalid && (s_price.dirty || s_price.touched)?'var(--ion-color-danger) ': s_price.valid?'var(--ion-color-success)' :'' }"
              ></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="3" offset="2">
              <ion-label>Enter Quantity</ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input
                clear-input
                class="quantity edit_input"
                mode="ios"
                type="number"
                name="quantity"
                placeholder="Enter Purchase Quantity"
                ngModel
                #quantity="ngModel"
                required
                min="0"
                [ngStyle]="{'border-color':  quantity.invalid && (quantity.dirty || quantity.touched)?'var(--ion-color-danger) ': quantity.valid?'var(--ion-color-success)' :'' }"
              ></ion-input>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="3" offset="2">
              <ion-label>Product Description</ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-textarea
                clear-input
                name="description"
                placeholder="Enter Product Description"
                ngModel
                #description="ngModel"
                required
                [ngStyle]="{'border-color':  description.invalid && (description.dirty || description.touched)?'var(--ion-color-danger) ': description.valid?'var(--ion-color-success)' :'' }"
              ></ion-textarea>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>
    <ion-footer>
      <ion-row>
        <ion-col size="4" offset="4">
          <ion-button disabled *ngIf="userForm.invalid" color="secondary"
            >Add New Product
          </ion-button>
          <ion-button *ngIf="userForm.valid" type="submit" color="secondary"
            >Add New Product
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-footer>
  </form>
</ion-content>
